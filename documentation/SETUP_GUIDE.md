# DRDL Fire Management System - Setup Guide

## Project Overview
The DRDL Fire Management System is a full-stack web application built with:
- **Frontend:** React.js (JavaScript)
- **Backend:** Spring Boot (Java)
- **Database:** Oracle 11g/12c

---

## Prerequisites

### System Requirements
- **OS:** Windows 10/11, macOS, or Linux
- **RAM:** Minimum 4GB
- **Disk Space:** At least 2GB free

### Required Software
1. **Java Development Kit (JDK) 17**
   - Download from: https://www.oracle.com/java/technologies/downloads/
   - Set JAVA_HOME environment variable

2. **Apache Maven 3.8.1+**
   - Download from: https://maven.apache.org/download.cgi
   - Add to PATH environment variable

3. **Node.js 16+ and npm 8+**
   - Download from: https://nodejs.org/
   - Verify: `node --version` and `npm --version`

4. **Oracle Database 11g/12c**
   - Database instance must be running
   - Default connection: `localhost:1521:ORCL`

5. **Git** (Optional, for cloning repository)
   - Download from: https://git-scm.com/

---

## Database Setup

### Step 1: Create Oracle User
Connect to Oracle Database as SYSDBA:

```sql
-- Create tablespace
CREATE TABLESPACE DRDL_TS DATAFILE 'drdl_ts.dbf' SIZE 100M;

-- Create user
CREATE USER DRDL_USER IDENTIFIED BY your_password
DEFAULT TABLESPACE DRDL_TS
QUOTA UNLIMITED ON DRDL_TS;

-- Grant permissions
GRANT CONNECT, RESOURCE TO DRDL_USER;
GRANT CREATE TABLE TO DRDL_USER;
GRANT CREATE SEQUENCE TO DRDL_USER;
```

### Step 2: Create Table
Connect as DRDL_USER and run:

```sql
CREATE TABLE SAFETY_REQUEST (
  REQUEST_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  PERS_NO CHAR(6) NOT NULL,
  DATE_OF_REQUEST DATE DEFAULT SYSDATE NOT NULL,
  SAFETY_COVERAGE VARCHAR2(50) NOT NULL,
  DIRECTORATE VARCHAR2(100),
  DIVISION VARCHAR2(100),
  INTEGRATION_FAC VARCHAR2(100),
  ARTICLE_DETAILS VARCHAR2(500),
  WORK_DESCRIPTION VARCHAR2(500),
  ACT_INCHARGE_NAME VARCHAR2(100),
  ACT_INCHARGE_ORG VARCHAR2(100),
  ACT_INCHARGE_PHONE VARCHAR2(15),
  DESIGNATION VARCHAR2(100),
  ACTIVITY_FROM_DATE DATE,
  ACTIVITY_TO_DATE DATE,
  ACTIVITY_SCHEDULE VARCHAR2(3) CHECK (ACTIVITY_SCHEDULE IN ('YES','NO')),
  ACTIVITY_PDF BLOB,
  AMBULANCE_REQUIRED VARCHAR2(3) CHECK (AMBULANCE_REQUIRED IN ('YES','NO')),
  OTHER_DETAILS VARCHAR2(500),
  TEST_BED VARCHAR2(100),
  TARB_CLEARANCE VARCHAR2(100),
  REFERENCE_NO VARCHAR2(100),
  TEST_CTRL_NAME VARCHAR2(100),
  TEST_CTRL_DESIG VARCHAR2(100),
  DATE_OF_TEST DATE,
  TEST_SCHEDULE_TIME TIMESTAMP,
  WORK_CENTRE VARCHAR2(100),
  TRANSPORTATION VARCHAR2(100),
  TRANS_SCHEDULE_TIME TIMESTAMP,
  TRANS_INCHARGE VARCHAR2(100),
  VEHICLE_DETAILS VARCHAR2(100),
  DRIVER_NAME VARCHAR2(100),
  DRIVER_DESIG VARCHAR2(100),
  DRIVER_AUTH VARCHAR2(3) CHECK (DRIVER_AUTH IN ('YES','NO')),
  HEAD_SFEED_STATUS VARCHAR2(20) CHECK (HEAD_SFEED_STATUS IN ('RECOMMENDED','NOT RECOMMENDED')),
  WORK_ALLOCATED_TO VARCHAR2(100),
  GD_TS_STATUS VARCHAR2(20) CHECK (GD_TS_STATUS IN ('APPROVED','NOT APPROVED'))
);

-- Create index on frequently queried columns
CREATE INDEX IDX_PERS_NO ON SAFETY_REQUEST(PERS_NO);
CREATE INDEX IDX_COVERAGE ON SAFETY_REQUEST(SAFETY_COVERAGE);
CREATE INDEX IDX_DATE ON SAFETY_REQUEST(DATE_OF_REQUEST);
```

---

## Backend Setup

### Step 1: Clone or Extract Project
```bash
cd /path/to/drdl-fire-management
ls -la
# You should see: backend, frontend, documentation
```

### Step 2: Configure Database Connection
Edit `backend/src/main/resources/application.properties`:

```properties
spring.application.name=drdl-fire-management
server.port=8080

# Oracle Database Configuration
spring.datasource.url=jdbc:oracle:thin:@localhost:1521:ORCL
spring.datasource.username=DRDL_USER
spring.datasource.password=your_password  # Replace with actual password
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.Oracle10gDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# Logging
logging.level.root=INFO
logging.level.com.drdl=DEBUG
```

### Step 3: Build Backend
```bash
cd backend
mvn clean install
# This will download dependencies and build the project
```

### Step 4: Run Backend Server
```bash
mvn spring-boot:run
```

**Expected Output:**
```
Started DrdlApplication in X.XXX seconds
```

**Backend is now running on:** `http://localhost:8080`

### Step 5: Test Backend (Optional)
```bash
# Get all requests
curl http://localhost:8080/api/v1/safety-requests

# Should return empty array: []
```

---

## Frontend Setup

### Step 1: Navigate to Frontend Directory
```bash
cd ../frontend  # From backend directory
# OR
cd /path/to/drdl-fire-management/frontend
```

### Step 2: Install Dependencies
```bash
npm install
```

This installs:
- React 18.2.0
- React DOM 18.2.0
- React Scripts 5.0.1

### Step 3: Start Development Server
```bash
npm start
```

**Expected Output:**
```
webpack compiled successfully
Compiled successfully!

You can now view drdl-frontend in the browser.
Local:            http://localhost:3000
```

### Step 4: Verify Frontend
- Browser should open automatically at `http://localhost:3000`
- You should see: "SAFETY FIRE REQUEST FORM"

---

## Project Structure

```
drdl-fire-management/
├── backend/
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/drdl/
│   │   │   │   ├── DrdlApplication.java
│   │   │   │   ├── controller/
│   │   │   │   │   └── SafetyRequestController.java
│   │   │   │   ├── service/
│   │   │   │   │   └── SafetyRequestService.java
│   │   │   │   ├── repository/
│   │   │   │   │   └── SafetyRequestRepository.java
│   │   │   │   ├── model/
│   │   │   │   │   └── SafetyRequest.java
│   │   │   │   ├── dto/
│   │   │   │   │   └── SafetyRequestDTO.java
│   │   │   │   └── config/
│   │   │   │       └── CorsConfig.java
│   │   │   └── resources/
│   │   │       └── application.properties
│   │   └── test/
│   └── pom.xml
│
├── frontend/
│   ├── public/
│   ├── src/
│   │   ├── components/
│   │   │   ├── SafetyFireRequestForm.jsx
│   │   │   ├── IntegrationSection.jsx
│   │   │   ├── StaticTestSection.jsx
│   │   │   └── TransportationSection.jsx
│   │   ├── services/
│   │   │   └── apiService.js
│   │   ├── styles/
│   │   │   └── SafetyFireRequestForm.css
│   │   ├── App.jsx
│   │   └── index.js
│   ├── package.json
│   └── README.md
│
└── documentation/
    ├── API_DOCUMENTATION.md
    └── SETUP_GUIDE.md
```

---

## Troubleshooting

### Backend Issues

**Problem: "Cannot connect to database"**
- Solution: Verify Oracle is running and credentials are correct
- Check: `sqlplus DRDL_USER/password@ORCL`

**Problem: "Port 8080 already in use"**
- Solution: Change port in `application.properties`
  ```properties
  server.port=8081
  ```

**Problem: "Maven build fails"**
- Solution: Clear Maven cache
  ```bash
  mvn clean
  rm -rf ~/.m2/repository  # On Unix/Mac
  mvn install
  ```

### Frontend Issues

**Problem: "npm install fails"**
- Solution: Clear npm cache
  ```bash
  npm cache clean --force
  npm install
  ```

**Problem: "Port 3000 already in use"**
- Solution: Change port
  ```bash
  PORT=3001 npm start
  ```

**Problem: "CORS error"**
- Solution: Verify backend CORS is configured and running on port 8080

### General Issues

**Problem: "Blank page on frontend"**
- Solution: Check browser console for errors (F12 → Console)
- Verify backend is running: `curl http://localhost:8080/api/v1/safety-requests`

**Problem: "Form submission not working"**
- Solution: Check network tab (F12 → Network) for failed requests
- Verify CORS is enabled in backend

---

## Running Both Services

### Terminal 1 - Backend
```bash
cd backend
mvn spring-boot:run
# Runs on http://localhost:8080
```

### Terminal 2 - Frontend
```bash
cd frontend
npm start
# Opens http://localhost:3000 in browser
```

---

## Production Deployment

### Backend (Spring Boot)
```bash
# Build JAR file
mvn clean package

# Run JAR
java -jar target/fire-management-system-1.0.0.jar
```

### Frontend (React)
```bash
# Build production files
npm run build

# This creates 'build' folder with optimized files
# Deploy 'build' folder to web server (nginx, Apache, etc.)
```

---

## Environment Configuration

### Development (.env for Frontend)
```
REACT_APP_API_URL=http://localhost:8080/api/v1
```

### Production
```
REACT_APP_API_URL=https://your-api-domain.com/api/v1
```

---

## Additional Commands

### Backend
```bash
# Run tests
mvn test

# Run specific test
mvn test -Dtest=SafetyRequestServiceTest

# Skip tests during build
mvn clean install -DskipTests

# View dependencies
mvn dependency:tree
```

### Frontend
```bash
# Run tests
npm test

# Build for production
npm run build

# Eject configuration (not recommended)
npm run eject
```

---

## Support & Documentation

- **API Docs:** See `documentation/API_DOCUMENTATION.md`
- **Database Schema:** See database section above
- **Issue Tracking:** Create GitHub issues or contact team

---

## Version Information
- **Java:** 17+
- **Spring Boot:** 3.1.5
- **React:** 18.2.0
- **Oracle:** 11g/12c
- **Node.js:** 16+

---

**Last Updated:** November 2024